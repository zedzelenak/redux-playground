<!doctype html>
<html lang="en">
  <head>
    <title>Dead simple annotated redux store and dispatch example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://unpkg.com/redux@latest/dist/redux.min.js"></script>
  </head>
  <body>
    <div id="actions">
      <button id="counter-increment">+ 1</button>
      <button id="counter-decrement">- 1</button>
    </div>
    <div id="display">
      <p>The counter is currently at <span id="value"></span></p>
    </div>
    <script>
      const initialState = {
        value: 0
      };

      // reducer to pick up actions from the store.dispatch calls
      function rootReducer(state = initialState, action) {
        switch(action.type) {
          case 'counter-incremented':
            return { ...state, value: state.value + 1};
            break;
          case 'counter-decremented':
            return { ...state, value: state.value - 1};
            break;
          default:
            return state;
        }
      };

      const store = Redux.createStore(rootReducer);

      function render() {
        const state = store.getState();
        document.querySelector('#display #value').innerHTML = state.value.toString();
      }

      render();

      // pass the render method, which updates the UI, as the subscriber callback. Once the state changes, render will get called again.
      store.subscribe(render);

      // simple DOM event handlers that will create store.dispatch calls w/ specific types that the reducer is listening for
      // which will update the state of the app and cause render to be called again
      document.querySelector('#counter-increment').addEventListener('click', 
        () => store.dispatch({type: 'counter-incremented'}));
      
      document.querySelector('#counter-decrement').addEventListener('click', 
        () => store.dispatch({type: 'counter-decremented'}));
    </script>
  </body>
</html>